package com.crazybee.news.bean;
//* @author Zhe Liu
//
import android.text.TextUtils;


/**
 *
 <item>
 <title>Residents ordered to evacuate as Southern California wildfire rages - Fox News</title>
 <link>http://news.google.com/news/url?sa=t&amp;fd=R&amp;usg=AFQjCNH_104Qxxr6qoF8hsW0PmrmnRkSaQ&amp;url=http://www.foxnews.com/us/2013/08/07/wildfire-in-southern-california-grows-fast-houses-evacuated/</link>
 <guid isPermaLink="false">tag:news.google.com,2005:cluster=43982122956423</guid>
 <category>Top Stories</category>
 <pubDate>Thu, 08 Aug 2013 05:40:56 GMT</pubDate>
 <description>&lt;table border=&quot;0&quot; cellpadding=&quot;2&quot; cellspacing=&quot;7&quot; style=&quot;vertical-align:top;&quot;&gt;&lt;tr&gt;&lt;td width=&quot;80&quot; align=&quot;center&quot; valign=&quot;top&quot;&gt;&lt;font style=&quot;font-size:85%;font-family:arial,sans-serif&quot;&gt;&lt;a href=&quot;http://news.google.com/news/url?sa=t&amp;amp;fd=R&amp;amp;usg=AFQjCNEQyBrew0Yrjb-PCF1dHyet8s8lVg&amp;amp;url=http://abcnews.go.com/US/wireStory/california-fire-grows-fast-houses-evacuated-19899319&quot;&gt;&lt;img src=&quot;//t2.gstatic.com/images?q=tbn:ANd9GcTKZVXi0YFYy6eV_OuKyYw2w0aUmknqjXWij-iNa6VM05WBt5Pqqllp7MnmA2EN33jQytj7kIc&quot; alt=&quot;&quot; border=&quot;1&quot; width=&quot;80&quot; height=&quot;80&quot; /&gt;&lt;br /&gt;&lt;font size=&quot;-2&quot;&gt;ABC News&lt;/font&gt;&lt;/a&gt;&lt;/font&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; class=&quot;j&quot;&gt;&lt;font style=&quot;font-size:85%;font-family:arial,sans-serif&quot;&gt;&lt;br /&gt;&lt;div style=&quot;padding-top:0.8em;&quot;&gt;&lt;img alt=&quot;&quot; height=&quot;1&quot; width=&quot;1&quot; /&gt;&lt;/div&gt;&lt;div class=&quot;lh&quot;&gt;&lt;a href=&quot;http://news.google.com/news/url?sa=t&amp;amp;fd=R&amp;amp;usg=AFQjCNH_104Qxxr6qoF8hsW0PmrmnRkSaQ&amp;amp;url=http://www.foxnews.com/us/2013/08/07/wildfire-in-southern-california-grows-fast-houses-evacuated/&quot;&gt;&lt;b&gt;Residents ordered to evacuate as Southern California wildfire rages&lt;/b&gt;&lt;/a&gt;&lt;br /&gt;&lt;font size=&quot;-1&quot;&gt;&lt;b&gt;&lt;font color=&quot;#6f6f6f&quot;&gt;Fox News&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;&lt;br /&gt;&lt;font size=&quot;-1&quot;&gt;BANNING, Calif. – An out-of-control wildfire growing with great speed in Southern California mountains Wednesday night burned homes, forced the evacuation of several mountain communities and left three people including two firefighters injured, two of&amp;nbsp;&lt;b&gt;...&lt;/b&gt;&lt;/font&gt;&lt;br /&gt;&lt;font size=&quot;-1&quot;&gt;&lt;a href=&quot;http://news.google.com/news/url?sa=t&amp;amp;fd=R&amp;amp;usg=AFQjCNHwxKaglMqGh5UpwoD3IXmomOkN9Q&amp;amp;url=http://www.latimes.com/local/lanow/la-me-ln-silver-fire-acreage-20130807,0,4755424.story&quot;&gt;Silver fire reaches 6000 acres, 3 people injured&lt;/a&gt;&lt;font size=&quot;-1&quot; color=&quot;#6f6f6f&quot;&gt;&lt;nobr&gt;Los Angeles Times&lt;/nobr&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;font size=&quot;-1&quot;&gt;&lt;a href=&quot;http://news.google.com/news/url?sa=t&amp;amp;fd=R&amp;amp;usg=AFQjCNGHKIiAYoTSZKwUxzqWkKMKxd4fpA&amp;amp;url=http://www.reuters.com/article/2013/08/08/us-usa-wildfire-california-idUSBRE97702320130808&quot;&gt;Three injured, hundreds evacuated as Southern California wildfire rages&lt;/a&gt;&lt;font size=&quot;-1&quot; color=&quot;#6f6f6f&quot;&gt;&lt;nobr&gt;Reuters&lt;/nobr&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;font size=&quot;-1&quot;&gt;&lt;a href=&quot;http://news.google.com/news/url?sa=t&amp;amp;fd=R&amp;amp;usg=AFQjCNFjtxUYvslke2vRtkM59YMuJEkeKA&amp;amp;url=http://www.usatoday.com/story/news/2013/08/07/silver-fire-riverside-county-calif/2630169/&quot;&gt;Southern California wildfire explodes, 3 injured&lt;/a&gt;&lt;font size=&quot;-1&quot; color=&quot;#6f6f6f&quot;&gt;&lt;nobr&gt;USA TODAY&lt;/nobr&gt;&lt;/font&gt;&lt;/font&gt;&lt;br /&gt;&lt;font size=&quot;-1&quot; class=&quot;p&quot;&gt;&lt;a href=&quot;http://news.google.com/news/url?sa=t&amp;amp;fd=R&amp;amp;usg=AFQjCNEETlHOhLAyuCtIGFUYXbBr8MZDQg&amp;amp;url=http://www.cbsnews.com/8301-201_162-57597516/3-hurt-in-calif-wildfire-some-cant-evacuate/&quot;&gt;&lt;nobr&gt;CBS News&lt;/nobr&gt;&lt;/a&gt;&amp;nbsp;-&lt;a href=&quot;http://news.google.com/news/url?sa=t&amp;amp;fd=R&amp;amp;usg=AFQjCNGMUnIx9X0k1ciBc6F5yga6qHdTJQ&amp;amp;url=http://www.sfgate.com/news/us/article/Trapped-residents-safely-evacuate-Calif-wildfire-4716103.php&quot;&gt;&lt;nobr&gt;San Francisco Chronicle&lt;/nobr&gt;&lt;/a&gt;&amp;nbsp;-&lt;a href=&quot;http://news.google.com/news/url?sa=t&amp;amp;fd=R&amp;amp;usg=AFQjCNH2WtpOD5LTSJB91uMIsBr_ERgc5w&amp;amp;url=http://www.pe.com/local-news/riverside-county/the-pass/the-pass-headlinesindex/20130807-silver-fire-multiple-homes-burn-as-blaze-scorches-6000-acres.ece&quot;&gt;&lt;nobr&gt;Press-Enterprise&lt;/nobr&gt;&lt;/a&gt;&lt;/font&gt;&lt;br /&gt;&lt;font class=&quot;p&quot; size=&quot;-1&quot;&gt;&lt;a class=&quot;p&quot; href=&quot;http://news.google.com/news/more?ncl=dKbC2GISYpPO_QMDiijZMW2jKbk3M&amp;amp;ned=us&amp;amp;topic=h&quot;&gt;&lt;nobr&gt;&lt;b&gt;all 53 news articles&amp;nbsp;&amp;raquo;&lt;/b&gt;&lt;/nobr&gt;&lt;/a&gt;&lt;/font&gt;&lt;/div&gt;&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
 </description>
 </item>
 
 * @author zhangjiantian
 *
 */
public class NewsItem {

	public static final int LIMIT_SIZE = 20;
	public static final String LIMIT = "0,20";

	private static final String TITLE_SPITE = " - ";
	private static final String IMAGE_TAG_LIND = "url=";
	private static final String IMAGE_TAG_START = "\"><img src=\"//";
	private static final String IMAGE_TAG_END = "\" alt=\"\"";
	private static final String HTTP = "http://";
	private static final String DES_TAG = "</b></font><br /><font size=\"-1\">";
	
	private static final String REPLACE_TAG_1 = "<b>...";
	private static final String REPLACE_TAG_2 = "</b>";
	private static final String REPLACE_TAG_3 = "<b>";
	private static final String REPLACE_TAG_4 = "&nbsp;";
	
	public long _id;

	public String title;
	public String link;
	public String guid;
	public String category;
	public String pubDate;
	public String description;

	public String imageDownloadUrl;//下载图片地址
	public String imageLink;//点击图片的链接
	public String imagePath;//本地存放路径
	public String source;//新闻来源
	public int channelId;//新闻类型
	public int readStatus;//0 未读，1 已读
	public long pubDateTime;
	public long createDate;

	public String formatDate;

	@Override
	public String toString() {
		return "NewsItem [title=" + title + ", link=" + link + ", guid=" + guid
				+ ", category=" + category + ", pubDate=" + pubDate
				+ ", description=" + description + ", imageDownloadUrl=" + imageDownloadUrl
				+ ", imageLink=" + imageLink
				+ ", source=" + source + ", channelId=" + channelId
				+ ", readStatus=" + readStatus + ", pubDateTime=" + pubDateTime
				+ ", createDate=" + createDate + "]";
	}

	public void spiteTitle(String title) {
		if (!TextUtils.isEmpty(title)) {
			int lastIndex = title.lastIndexOf(TITLE_SPITE);
			if (lastIndex > -1) {
				this.title = title.substring(0, lastIndex);
				source = title.substring(lastIndex + TITLE_SPITE.length());
			} else {
				this.title = title;
			}
		}
	}
	
	public void fixOthers() {
		int imgLinkIndex = description.indexOf(IMAGE_TAG_LIND);
		int imgStartIndex = description.indexOf(IMAGE_TAG_START);
		if (imgStartIndex > -1) {//图片超链接,下载地址
			imageLink = description.substring(imgLinkIndex + IMAGE_TAG_LIND.length(), imgStartIndex);
			imageDownloadUrl = description.substring(imgStartIndex + IMAGE_TAG_START.length(), description.indexOf(IMAGE_TAG_END));
			if (!TextUtils.isEmpty(imageDownloadUrl) && !imageDownloadUrl.startsWith(HTTP)) {
				imageDownloadUrl = HTTP + imageDownloadUrl;
			}
		}
		
		int dexIndex = description.indexOf(DES_TAG);
		if (dexIndex > -1) {
			description = description.substring(dexIndex + DES_TAG.length());
			dexIndex = description.indexOf(DES_TAG);
			if (dexIndex > -1) {
				description = description.substring(0, dexIndex);
			}
		}
		description = description.replaceAll(REPLACE_TAG_1, "");
		description = description.replaceAll(REPLACE_TAG_2, "");
		description = description.replaceAll(REPLACE_TAG_3, "");
		description = description.replaceAll(REPLACE_TAG_4, "");
	}

	@Override
	public int hashCode() {
		final int prime = 31;
		return prime + ((source == null) ? 0 : source.hashCode()) + ((title == null) ? 0 : title.hashCode());
	}

	@Override
	public boolean equals(Object o) {
		if (o == null) {
			return false;
		} else if (o instanceof NewsItem) {
			NewsItem item = (NewsItem) o;
			if (item.channelId == this.channelId
					&& (item.title.equals(this.title) || item.link.equals(this.link))) {
				return true;
			}
		}
		return false;
	}
	
}
